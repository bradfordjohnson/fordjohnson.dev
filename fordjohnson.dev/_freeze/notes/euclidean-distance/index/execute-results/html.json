{
  "hash": "d68c95b929b0a0e59966331f33164457",
  "result": {
    "engine": "knitr",
    "markdown": "---\npagetitle: Euclidean Distance Between Vectors\ndescription: |\n  Discover the concept of Euclidean distance, a fundamental metric used in various fields to measure the straight-line distance between points in space. This page covers its mathematical formulation, applications in data analysis, and examples to illustrate its use in clustering and dimensionality reduction.\nexecute: \n  freeze: auto\n---\n\n\n\n::: column-page\n# Euclidean Distance Between Vectors\n:::\n\n::::: column-screen\n:::: portfolio-banner\n::: column-page\nMeasuring similarity and difference between data points is essential for analysis. One effective approach is **Euclidean distance**, which quantifies how far apart two sets of values are. By calculating the sum of the squares of differences between corresponding elements, we can easily determine which points are most similar or different, helping to reveal patterns and inform decision-making.\n:::\n::::\n:::::\n\n::: {.column-page .binom}\nIn [TidyTuesday's](https://github.com/rfordatascience/tidytuesday/tree/master/data/2023/2023-06-06) 06/06/2023 dataset, which featured various energy metrics by country and year, we can use Euclidean distance to find the countries most similar (or different) to a target country for a given metric, such as electricity generation.\n\nThis method allows us to compare a target country’s electricity generation to others and compute a similarity score that quantifies how closely each country aligns with the target.\n\n### Why might you want to know which countries are similar?\n\nThis type of analysis serves as a baseline to identify the impact of changes over time. For example, in a business context, this could involve comparing KPIs across market subsets to assess the effectiveness of a targeted marketing campaign. If one subset shows a significant change, we can check if others experienced a similar trend.\n\nFor this example, I’m interested in Germany’s electricity generation. Using Euclidean distance, I'll compare electricity generation across all countries and find the five most similar and five most different from Germany. A lower Euclidean distance means a country is more similar to Germany, while a higher score indicates greater dissimilarity.\n\n\n\n::: {.cell}\n\n```{.r .cell-code .code-overflow-wrap  code-fold=\"true\"}\nlibrary(tidyverse)\n\nowid_energy <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2023/2023-06-06/owid-energy.csv')\n\ncountries <- c(\n  \"CAN\", \"MEX\", \"BLZ\", \"CRI\", \"SLV\", \"GTM\", \"HND\",\n  \"NIC\", \"PAN\", \"BHS\", \"BRB\", \"CUB\", \"DOM\", \"HTI\",\n  \"JAM\", \"TTO\",\"ALB\", \"AND\", \"ARM\", \"AUT\", \"AZE\",\n  \"BLR\", \"BEL\", \"BIH\", \"BGR\", \"HRV\", \"CYP\", \"CZE\",\n  \"DNK\", \"EST\", \"FIN\", \"FRA\", \"GEO\", \"USA\", \"GRC\",\n  \"HUN\", \"ISL\", \"IRL\", \"ITA\", \"KAZ\", \"LVA\", \"LIE\",\n  \"LTU\", \"LUX\", \"MLT\", \"MDA\", \"MCO\", \"MNE\", \"NLD\",\n  \"MKD\", \"NOR\", \"POL\", \"PRT\", \"ROU\", \"RUS\", \"SMR\",\n  \"SRB\", \"SVK\", \"SVN\", \"ESP\", \"SWE\", \"CHE\", \"UKR\",\n  \"GBR\", \"VAT\"\n)\n\nelectricity_generation <- owid_energy %>%\n  select(country, iso_code, year, electricity_generation) %>%\n  filter(year > 2000 & iso_code %in% countries)\n\ntarget_country <- \"DEU\" # Germany's 3 letter ISO country code\n\ntarget_country_generation <- owid_energy %>%\n  filter(year > 2000 & year < 2021 & iso_code == target_country) %>%\n  select(year, electricity_generation) %>%\n  rename(target_generation = electricity_generation)\n\ncountries_with_similarity_score <- electricity_generation %>%\n  left_join(target_country_generation, by = \"year\") %>%\n  group_by(country, iso_code) %>%\n  summarize(euclidean_distance = sqrt(sum((electricity_generation - target_generation)^2, na.rm = TRUE))) %>%\n  arrange(euclidean_distance)\n```\n:::\n\n\n:::\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 3\n# Groups:   country [6]\n  country        iso_code euclidean_distance\n  <chr>          <chr>                 <dbl>\n1 Canada         CAN                    101.\n2 France         FRA                    253.\n3 United Kingdom GBR                   1141.\n4 Italy          ITA                   1454.\n5 Spain          ESP                   1513.\n6 Mexico         MEX                   1571.\n```\n\n\n:::\n:::\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 3\n# Groups:   country [6]\n  country       iso_code euclidean_distance\n  <chr>         <chr>                 <dbl>\n1 Malta         MLT                   2744.\n2 Bahamas       BHS                   2745.\n3 Barbados      BRB                   2749.\n4 Haiti         HTI                   2750.\n5 Belize        BLZ                   2751.\n6 United States USA                  15297.\n```\n\n\n:::\n:::\n\n\n\n::: {.column-page .binom}\nThe tables above show the countries most and least similar to Germany in terms of electricity generation trends. The most similar countries include Canada, France, and the United Kingdom, while the least similar countries range from Malta and the Bahamas to the United States.\n\nIn a business context, this type of analysis can help establish a baseline for performance across similar markets. For instance, if you introduce a new policy or product in Germany, you could track Germany’s performance over time and compare it to the performance of these similar countries, both before and after the change. This would allow you to assess the effectiveness of the change and identify whether it led to any measurable impact that’s unique to Germany, or if similar trends occurred in comparable markets.\n\nNow, let’s look at the visuals. The first chart compares Germany's electricity generation trends with its most similar countries, and the second chart contrasts these trends with countries that are less similar. This setup could be applied similarly in a business setting, helping to monitor the effect of any strategic changes.\n\n\n\n::: {.cell}\n\n```{.r .cell-code .code-overflow-wrap  code-fold=\"true\"}\nlibrary(tidyverse)\nlibrary(showtext)\nlibrary(htmltools)\nlibrary(gghighlight)\n\nshowtext_auto()\nshowtext_opts(dpi = 300)\n\nfont_add_google(name = \"Roboto\", family = \"Roboto\")\nfont <- \"Roboto\"\n\ntitle <- paste0(\n  \"<span>Highlighting Countries Similar to<span style='color:#6929c4;'> Germany</span></span>\"\n)\n\nsubtitle <- paste0(\n  \"<span>Electric Generation - Terawatt hours (2000-2020)</span>\"\n)\n\nsimilar_highlighted_plot <- owid_energy %>%\n  filter(iso_code %in% countries | iso_code == 'DEU') %>%\n  filter(year > 2000 & year < 2021 & iso_code != 'USA') %>%\n  ggplot(aes(x = year, y = electricity_generation, group = iso_code, color = iso_code)) +\n  geom_line() +\n  gghighlight(iso_code %in% c('DEU', 'FRA', 'CAN'), \n              use_direct_label = FALSE) +\n  labs(\n    title = title,\n    subtitle = subtitle,\n    y = \"Terawatt hours (TWh)\",\n    x = \"Year\"\n  ) +\n    scale_color_manual(\n    values = c('DEU' = '#6929c4', 'FRA' = '#1192e8', 'CAN' = '#198038', 'Other' = '#D3D3D3'),\n    labels = c('DEU' = 'Germany', 'FRA' = 'France', 'CAN' = 'Canada')\n  ) +\n  scale_y_continuous(breaks = seq(0, 1100, by = 250)) +\n  theme_void() +\n  theme(\n    legend.position = \"right\",\n    legend.title = element_blank(),\n    axis.text = element_text(\n      family = font,\n      size = 5\n    ),\n    axis.title = element_text(\n      family = font,\n      size = 6\n    ),\n    axis.title.x = element_text(\n      margin = margin(7,0,0,0,\"mm\")\n    ),\n    axis.title.y = element_text(\n      angle = 90,\n      margin = margin(0,7,0,0,\"mm\")\n    ),\n    panel.grid.major = element_line(colour = \"#e0e0e0\", linewidth = 0.1),\n    legend.text = element_text(\n      family = font,\n      size = 5\n    ),\n    plot.title = ggtext::element_textbox_simple(\n      family = font,\n      size = 9,\n      margin = margin(10,0,0,0)\n    ),\n    plot.subtitle = ggtext::element_textbox_simple(\n      family = font,\n      size = 7,\n      margin = margin(10,0,0,0)\n    ),\n    plot.margin = margin(5,5,5,5, \"mm\")\n  )\n```\n:::\n\n\n:::\n\n\n\n::: {.cell .fig-column-page}\n::: {.cell-output-display}\n![](index_files/figure-html/similiar-countries-plot-2-1.png){width=672}\n:::\n:::",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}